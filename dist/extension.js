module.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=29)}([function(t,e,i){(function(){var e,n,r,o,s,a,u,c,l,h,p,f,d={}.hasOwnProperty;f=i(2),p=f.isObject,h=f.isFunction,l=f.isEmpty,s=null,e=null,n=null,r=null,o=null,u=null,c=null,a=null,t.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=i(6),e=i(7),n=i(8),r=i(9),o=i(10),u=i(15),c=i(16),a=i(17))}return t.prototype.element=function(t,e,i){var n,r,o,s,a,u,c,f,y,m;if(u=null,null==e&&(e={}),e=e.valueOf(),p(e)||(i=(y=[e,i])[0],e=y[1]),null!=t&&(t=t.valueOf()),Array.isArray(t))for(o=0,c=t.length;o<c;o++)r=t[o],u=this.element(r);else if(h(t))u=this.element(t.apply());else if(p(t)){for(a in t)if(d.call(t,a))if(m=t[a],h(m)&&(m=m.apply()),p(m)&&l(m)&&(m=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))u=this.attribute(a.substr(this.stringify.convertAttKey.length),m);else if(!this.options.separateArrayItems&&Array.isArray(m))for(s=0,f=m.length;s<f;s++)r=m[s],(n={})[a]=r,u=this.element(n);else p(m)?(u=this.element(a)).element(m):u=this.element(a,m)}else u=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(i):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(i):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(i):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(i):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),i):this.node(t,e,i);if(null==u)throw new Error("Could not create any elements with: "+t);return u},t.prototype.insertBefore=function(t,e,i){var n,r,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return r=this.parent.children.indexOf(this),o=this.parent.children.splice(r),n=this.parent.element(t,e,i),Array.prototype.push.apply(this.parent.children,o),n},t.prototype.insertAfter=function(t,e,i){var n,r,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return r=this.parent.children.indexOf(this),o=this.parent.children.splice(r+1),n=this.parent.element(t,e,i),Array.prototype.push.apply(this.parent.children,o),n},t.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,i){var n,r;return null!=t&&(t=t.valueOf()),e||(e={}),e=e.valueOf(),p(e)||(i=(r=[e,i])[0],e=r[1]),n=new s(this,t,e),null!=i&&n.text(i),this.children.push(n),n},t.prototype.text=function(t){var e;return e=new c(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var i;return i=new e(this,t),this.children.push(i),this},t.prototype.comment=function(t){var e;return e=new n(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,i;return e=this.parent.children.indexOf(this),i=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,i),this},t.prototype.commentAfter=function(t){var e,i;return e=this.parent.children.indexOf(this),i=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,i),this},t.prototype.raw=function(t){var e;return e=new u(this,t),this.children.push(e),this},t.prototype.instruction=function(t,e){var i,n,r,o,s;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(o=0,s=t.length;o<s;o++)i=t[o],this.instruction(i);else if(p(t))for(i in t)d.call(t,i)&&(n=t[i],this.instruction(i,n));else h(e)&&(e=e.apply()),r=new a(this,t,e),this.children.push(r);return this},t.prototype.instructionBefore=function(t,e){var i,n;return i=this.parent.children.indexOf(this),n=this.parent.children.splice(i),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.instructionAfter=function(t,e){var i,n;return i=this.parent.children.indexOf(this),n=this.parent.children.splice(i+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.declaration=function(t,e,i){var n,o;return n=this.document(),o=new r(n,t,e,i),n.children[0]instanceof r?n.children[0]=o:n.children.unshift(o),n.root()||n},t.prototype.doctype=function(t,e){var i,n,r,s,a,u,c,l,h;for(i=this.document(),n=new o(i,t,e),r=s=0,u=(l=i.children).length;s<u;r=++s)if(l[r]instanceof o)return i.children[r]=n,n;for(r=a=0,c=(h=i.children).length;a<c;r=++a)if(h[r].isRoot)return i.children.splice(r,0,n),n;return i.children.push(n),n},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.isDocument)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.isDocument)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.ele=function(t,e,i){return this.element(t,e,i)},t.prototype.nod=function(t,e,i){return this.node(t,e,i)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,i){return this.declaration(t,e,i)},t.prototype.dtd=function(t,e){return this.doctype(t,e)},t.prototype.e=function(t,e,i){return this.element(t,e,i)},t.prototype.n=function(t,e,i){return this.node(t,e,i)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t}()}).call(this)},function(t,e){t.exports=require("vscode")},function(t,e){(function(){var e,i,n,r,o,s,a=[].slice,u={}.hasOwnProperty;e=function(){var t,e,i,n,o,s;if(s=arguments[0],o=2<=arguments.length?a.call(arguments,1):[],r(Object.assign))Object.assign.apply(null,arguments);else for(t=0,i=o.length;t<i;t++)if(null!=(n=o[t]))for(e in n)u.call(n,e)&&(s[e]=n[e]);return s},r=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},o=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},i=function(t){return r(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},n=function(t){var e;if(i(t))return!t.length;for(e in t)if(u.call(t,e))return!1;return!0},s=function(t){var e,i;return o(t)&&(i=Object.getPrototypeOf(t))&&(e=i.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},t.exports.assign=e,t.exports.isFunction=r,t.exports.isObject=o,t.exports.isArray=i,t.exports.isEmpty=n,t.exports.isPlainObject=s}).call(this)},function(t,e){t.exports=require("path")},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(59),o=i(3),s=i(1),a=i(5),u=i(23),c=i(18),l=i(27),h=i(28);e.default={getObjectsFromMetaData:function(){const t=o.join(s.workspace.rootPath,"src","profiles"),e=a.readdirSync(t);if(0===e.length)throw Error("No Profile definition file was found in folder "+t);return this.generateProfilesDefinitions(e,t)},generateProfilesDefinitions:function(t,e){return t.map(t=>new r.default(t,e))},readProfileDefinitionFile:function(t){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=o.join(t.folder.toString(),t.fileName),r=a.readFileSync(n,{encoding:"utf-8"}),s=new u.Parser({explicitArray:!1,valueProcessors:[c.parseBooleans]});try{const t=yield new Promise((t,e)=>{s.parseString(r,(i,n)=>{i?e(i):t(n)})});e(t)}catch(t){i(t)}}))})},writeProfileDefinitionFile:function(t,e){const i=new u.Builder({xmldec:{standalone:void 0,encoding:"UTF-8",version:"1.0"}}).buildObject(e);let n=i.substr(0,130)+i.substr(130,i.length-130).replace(/"/g,"&quot;").replace(/'/g,"&apos;");a.writeFileSync(t.toString(),n,"utf8")},updateProfilesVisibilityForField:function(t,e,i){return n(this,void 0,void 0,function*(){try{t.forEach(t=>n(this,void 0,void 0,function*(){const n=yield this.readProfileDefinitionFile(t);e.forEach(t=>{t.fields.forEach(e=>{n.Profile.fieldPermissions.push({readable:i!==l.default.none,field:`${t.sObject.label}.${e.fullName}`,editable:i===l.default.edit})})}),n.Profile.fieldPermissions.sort((t,e)=>h.default.sortFieldsByField(t,e,"fullName")),this.writeProfileDefinitionFile(o.join(t.folder.toString(),t.fileName),n)}))}catch(e){throw Error(`Error updating field-level security for profiles: ${t.map(t=>t.label)}`)}})},updateProfilesApexClassesAccess:function(t,e){return n(this,void 0,void 0,function*(){try{const i=yield this.readProfileDefinitionFile(t);i.Profile.classAccesses.forEach(t=>{t.enabled=e.includes(t.apexClass)}),i.Profile.classAccesses.sort((t,e)=>h.default.sortFieldsByField(t,e,"apexClass")),this.writeProfileDefinitionFile(o.join(t.folder.toString(),t.fileName),i)}catch(e){throw Error(`Error updating Apex Class Access for profile: ${t.label}`)}})},updateProfilesApexPagesAccess:function(t,e){return n(this,void 0,void 0,function*(){try{const i=yield this.readProfileDefinitionFile(t);i.Profile.pageAccesses.forEach(t=>{t.enabled=e.includes(t.apexPage)}),i.Profile.pageAccesses.sort((t,e)=>h.default.sortFieldsByField(t,e,"apexPage")),this.writeProfileDefinitionFile(o.join(t.folder.toString(),t.fileName),i)}catch(e){throw Error(`Error updating Visualforce Page Access for profile: ${t.label}`)}})}}},function(t,e){t.exports=require("fs")},function(t,e,i){(function(){var e,n,r,o,s,a={}.hasOwnProperty;s=i(2),o=s.isObject,r=s.isFunction,n=i(0),e=i(24),t.exports=function(t){function i(t,e,n){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing element name");this.name=this.stringify.eleName(e),this.attributes={},null!=n&&this.attribute(n),t.isDocument&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this)}return function(t,e){for(var i in e)a.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,n),i.prototype.clone=function(){var t,e,i,n;for(e in(i=Object.create(this)).isRoot&&(i.documentObject=null),i.attributes={},n=this.attributes)a.call(n,e)&&(t=n[e],i.attributes[e]=t.clone());return i.children=[],this.children.forEach(function(t){var e;return(e=t.clone()).parent=i,i.children.push(e)}),i},i.prototype.attribute=function(t,i){var n,s;if(null!=t&&(t=t.valueOf()),o(t))for(n in t)a.call(t,n)&&(s=t[n],this.attribute(n,s));else r(i)&&(i=i.apply()),this.options.skipNullAttributes&&null==i||(this.attributes[t]=new e(this,t,i));return this},i.prototype.removeAttribute=function(t){var e,i,n;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),Array.isArray(t))for(i=0,n=t.length;i<n;i++)e=t[i],delete this.attributes[e];else delete this.attributes[t];return this},i.prototype.toString=function(t){return this.options.writer.set(t).element(this)},i.prototype.att=function(t,e){return this.attribute(t,e)},i.prototype.a=function(t,e){return this.attribute(t,e)},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(e)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.set(t).cdata(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing comment text");this.text=this.stringify.comment(e)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.set(t).comment(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n,r={}.hasOwnProperty;n=i(2).isObject,e=i(0),t.exports=function(t){function i(t,e,r,o){var s;i.__super__.constructor.call(this,t),n(e)&&(e=(s=e).version,r=s.encoding,o=s.standalone),e||(e="1.0"),this.version=this.stringify.xmlVersion(e),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,e),i.prototype.toString=function(t){return this.options.writer.set(t).declaration(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n,r,o,s,a,u={}.hasOwnProperty;a=i(2).isObject,s=i(0),e=i(11),r=i(12),n=i(13),o=i(14),t.exports=function(t){function i(t,e,n){var r,o;i.__super__.constructor.call(this,t),this.documentObject=t,a(e)&&(e=(r=e).pubID,n=r.sysID),null==n&&(n=(o=[e,n])[0],e=o[1]),null!=e&&(this.pubID=this.stringify.dtdPubID(e)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(t,e){for(var i in e)u.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,s),i.prototype.element=function(t,e){var i;return i=new n(this,t,e),this.children.push(i),this},i.prototype.attList=function(t,i,n,r,o){var s;return s=new e(this,t,i,n,r,o),this.children.push(s),this},i.prototype.entity=function(t,e){var i;return i=new r(this,!1,t,e),this.children.push(i),this},i.prototype.pEntity=function(t,e){var i;return i=new r(this,!0,t,e),this.children.push(i),this},i.prototype.notation=function(t,e){var i;return i=new o(this,t,e),this.children.push(i),this},i.prototype.toString=function(t){return this.options.writer.set(t).docType(this)},i.prototype.ele=function(t,e){return this.element(t,e)},i.prototype.att=function(t,e,i,n,r){return this.attList(t,e,i,n,r)},i.prototype.ent=function(t,e){return this.entity(t,e)},i.prototype.pent=function(t,e){return this.pEntity(t,e)},i.prototype.not=function(t,e){return this.notation(t,e)},i.prototype.up=function(){return this.root()||this.documentObject},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e,n,r,o,s){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!r)throw new Error("Missing DTD attribute type");if(!o)throw new Error("Missing DTD attribute default");if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(s&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(e),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(s),this.defaultValueType=o}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.toString=function(t){return this.options.writer.set(t).dtdAttList(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n,r={}.hasOwnProperty;n=i(2).isObject,e=i(0),t.exports=function(t){function i(t,e,r,o){if(i.__super__.constructor.call(this,t),null==r)throw new Error("Missing entity name");if(null==o)throw new Error("Missing entity value");if(this.pe=!!e,this.name=this.stringify.eleName(r),n(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity");if(null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(o)}return function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,e),i.prototype.toString=function(t){return this.options.writer.set(t).dtdEntity(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e,n){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name");n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(e),this.value=this.stringify.dtdElementValue(n)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.toString=function(t){return this.options.writer.set(t).dtdElement(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e,n){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(e),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.toString=function(t){return this.options.writer.set(t).dtdNotation(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing raw text");this.value=this.stringify.raw(e)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.set(t).raw(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing element text");this.value=this.stringify.eleText(e)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.set(t).text(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n={}.hasOwnProperty;e=i(0),t.exports=function(t){function i(t,e,n){if(i.__super__.constructor.call(this,t),null==e)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(e),n&&(this.value=this.stringify.insValue(n))}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.set(t).processingInstruction(this)},i}()}).call(this)},function(t,e){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),e.normalize=function(t){return t.toLowerCase()},e.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},e.stripPrefix=function(e){return e.replace(t,"")},e.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},e.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},function(t,e){(function(){e.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(t,e,i){(function(){var e,n,r,o,s,a,u,c,l,h,p,f,d,y={}.hasOwnProperty;u=i(9),c=i(10),e=i(7),n=i(8),l=i(6),p=i(15),f=i(16),h=i(17),r=i(11),o=i(13),s=i(12),a=i(14),d=i(26),t.exports=function(t){function i(t){i.__super__.constructor.call(this,t)}return function(t,e){for(var i in e)y.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,d),i.prototype.document=function(t){var e,i,r,o,s;for(this.textispresent=!1,o="",i=0,r=(s=t.children).length;i<r;i++)e=s[i],o+=function(){switch(!1){case!(e instanceof u):return this.declaration(e);case!(e instanceof c):return this.docType(e);case!(e instanceof n):return this.comment(e);case!(e instanceof h):return this.processingInstruction(e);default:return this.element(e,0)}}.call(this);return this.pretty&&o.slice(-this.newline.length)===this.newline&&(o=o.slice(0,-this.newline.length)),o},i.prototype.attribute=function(t){return" "+t.name+'="'+t.value+'"'},i.prototype.cdata=function(t,e){return this.space(e)+"<![CDATA["+t.text+"]]>"+this.newline},i.prototype.comment=function(t,e){return this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.newline},i.prototype.declaration=function(t,e){var i;return i=this.space(e),i+='<?xml version="'+t.version+'"',null!=t.encoding&&(i+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(i+=' standalone="'+t.standalone+'"'),i+=this.spacebeforeslash+"?>",i+=this.newline},i.prototype.docType=function(t,i){var u,c,l,p,f;if(i||(i=0),p=this.space(i),p+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?p+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(p+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(p+=" [",p+=this.newline,c=0,l=(f=t.children).length;c<l;c++)u=f[c],p+=function(){switch(!1){case!(u instanceof r):return this.dtdAttList(u,i+1);case!(u instanceof o):return this.dtdElement(u,i+1);case!(u instanceof s):return this.dtdEntity(u,i+1);case!(u instanceof a):return this.dtdNotation(u,i+1);case!(u instanceof e):return this.cdata(u,i+1);case!(u instanceof n):return this.comment(u,i+1);case!(u instanceof h):return this.processingInstruction(u,i+1);default:throw new Error("Unknown DTD node type: "+u.constructor.name)}}.call(this);p+="]"}return p+=this.spacebeforeslash+">",p+=this.newline},i.prototype.element=function(t,i){var r,o,s,a,u,c,d,m,g,w,v,b,_;for(d in i||(i=0),_=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),m="",m+=(b=this.space(i))+"<"+t.name,g=t.attributes)y.call(g,d)&&(r=g[d],m+=this.attribute(r));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?m+="></"+t.name+">"+this.newline:m+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)m+=">",m+=t.children[0].value,m+="</"+t.name+">"+this.newline;else{if(this.dontprettytextnodes)for(s=0,u=(w=t.children).length;s<u;s++)if(null!=(o=w[s]).value){this.textispresent++,_=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,b=this.space(i)),m+=">"+this.newline,a=0,c=(v=t.children).length;a<c;a++)o=v[a],m+=function(){switch(!1){case!(o instanceof e):return this.cdata(o,i+1);case!(o instanceof n):return this.comment(o,i+1);case!(o instanceof l):return this.element(o,i+1);case!(o instanceof p):return this.raw(o,i+1);case!(o instanceof f):return this.text(o,i+1);case!(o instanceof h):return this.processingInstruction(o,i+1);default:throw new Error("Unknown XML node type: "+o.constructor.name)}}.call(this);_&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),m+=b+"</"+t.name+">"+this.newline}return m},i.prototype.processingInstruction=function(t,e){var i;return i=this.space(e)+"<?"+t.target,t.value&&(i+=" "+t.value),i+=this.spacebeforeslash+"?>"+this.newline},i.prototype.raw=function(t,e){return this.space(e)+t.value+this.newline},i.prototype.text=function(t,e){return this.space(e)+t.value+this.newline},i.prototype.dtdAttList=function(t,e){var i;return i=this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(i+=" "+t.defaultValueType),t.defaultValue&&(i+=' "'+t.defaultValue+'"'),i+=this.spacebeforeslash+">"+this.newline},i.prototype.dtdElement=function(t,e){return this.space(e)+"<!ELEMENT "+t.name+" "+t.value+this.spacebeforeslash+">"+this.newline},i.prototype.dtdEntity=function(t,e){var i;return i=this.space(e)+"<!ENTITY",t.pe&&(i+=" %"),i+=" "+t.name,t.value?i+=' "'+t.value+'"':(t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),t.nData&&(i+=" NDATA "+t.nData)),i+=this.spacebeforeslash+">"+this.newline},i.prototype.dtdNotation=function(t,e){var i;return i=this.space(e)+"<!NOTATION "+t.name,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?i+=' PUBLIC "'+t.pubID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),i+=this.spacebeforeslash+">"+this.newline},i.prototype.openNode=function(t,e){var i,n,r,o;if(e||(e=0),t instanceof l){for(n in r=this.space(e)+"<"+t.name,o=t.attributes)y.call(o,n)&&(i=o[n],r+=this.attribute(i));return r+=(t.children?">":"/>")+this.newline}return r=this.space(e)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),r+=(t.children?" [":">")+this.newline},i.prototype.closeNode=function(t,e){switch(e||(e=0),!1){case!(t instanceof l):return this.space(e)+"</"+t.name+">"+this.newline;case!(t instanceof c):return this.space(e)+"]>"+this.newline}},i}()}).call(this)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(60),r=i(3),o=i(1),s=i(5);class a{constructor(){this.getCfgPath=()=>r.join(o.workspace.rootPath,".swift💫sfdc.json"),this._currentConfig=void 0,this.init()}static getInstance(){return void 0===this.instance&&(this.instance=new a),this.instance}getConfig(){return this._currentConfig}readConfig(){if(o.workspace.rootPath&&s.existsSync(this.getCfgPath())){const t=s.readFileSync(this.getCfgPath(),"utf8");return JSON.parse(t)}}storeConfig(t){try{return console.log("Storing configuration.."),s.writeFileSync(this.getCfgPath(),JSON.stringify(t)),!0}catch(t){return!1}}init(){if(console.log("Initializing configuration.."),void 0===this._currentConfig){let t=this.readConfig();void 0===t&&(console.log("Configuration not found, generating a new one"),t=new n.default);const e={get:(t,e)=>t[e],set:(t,e,i)=>(t[e]=i,a.getInstance().storeConfig(t))};this._currentConfig=new Proxy(t,e),this.storeConfig(this._currentConfig)}}}e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n){this.fullName=t,this.externalId=i,this.label=e,this.type="Date",this.required=n}}},function(t,e,i){(function(){"use strict";var t,n,r,o,s={}.hasOwnProperty;n=i(19),t=i(47),r=i(52),o=i(18),e.defaults=n.defaults,e.processors=o,e.ValidationError=function(t){function e(t){this.message=t}return function(t,e){for(var i in e)s.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,Error),e}(),e.Builder=t.Builder,e.Parser=r.Parser,e.parseString=r.parseString}).call(this)},function(t,e){(function(){t.exports=function(){function t(t,e,i){if(this.options=t.options,this.stringify=t.stringify,null==e)throw new Error("Missing attribute name of element "+t.name);if(null==i)throw new Error("Missing attribute value for attribute "+e+" of element "+t.name);this.name=this.stringify.attName(e),this.value=this.stringify.attValue(i)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.set(t).attribute(this)},t}()}).call(this)},function(t,e){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty;t.exports=function(){function t(t){var n,r,o;for(n in this.assertLegalChar=e(this.assertLegalChar,this),t||(t={}),this.noDoubleEncoding=t.noDoubleEncoding,r=t.stringify||{})i.call(r,n)&&(o=r[n],this[n]=o)}return t.prototype.eleName=function(t){return t=""+t||"",this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){return t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t)},t.prototype.comment=function(t){if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return""+t||""},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e;if(e=t.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+t+" at index "+e.index);return t},t.prototype.elEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(this)},function(t,e){(function(){var e={}.hasOwnProperty;t.exports=function(){function t(t){var i,n,r,o,s,a,u,c,l;for(i in t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=null!=(n=t.allowEmpty)&&n,this.pretty?(this.indent=null!=(r=t.indent)?r:"  ",this.newline=null!=(o=t.newline)?o:"\n",this.offset=null!=(s=t.offset)?s:0,this.dontprettytextnodes=null!=(a=t.dontprettytextnodes)?a:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(u=t.spacebeforeslash)?u:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,c=t.writer||{})e.call(c,i)&&(l=c[i],this[i]=l)}return t.prototype.set=function(t){var i,n,r;for(i in t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:"\n",this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,n=t.writer||{})e.call(n,i)&&(r=n[i],this[i]=r);return this},t.prototype.space=function(t){var e;return this.pretty&&(e=(t||0)+this.offset+1)>0?new Array(e).join(this.indent):""},t}()}).call(this)},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.none=0]="none",t[t.read=1]="read",t[t.edit=2]="edit"}(n||(n={})),e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={sortFieldsByField:(t,e,i)=>t[i]>e[i]?1:t[i]<e[i]?-1:0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),r=i(30),o=i(21);e.activate=function(t){console.log("Managing configuration..."),o.default.getInstance(),t.subscriptions.push(n.commands.registerCommand("SwiftSfdc.createField",r.default.createField)),t.subscriptions.push(n.commands.registerCommand("SwiftSfdc.configureDefaultFieldsProfiles",r.default.configureDefaultFieldsProfiles)),t.subscriptions.push(n.commands.registerCommand("SwiftSfdc.configureProfilesApexClasses",r.default.configureProfilesApexClasses)),t.subscriptions.push(n.commands.registerCommand("SwiftSfdc.configureProfilesApexPages",r.default.configureProfilesApexPages)),n.commands.executeCommand("setContext","swift-sfdc-active",!0),console.log('Congratulations, your extension "swift-sfdc" is now active!')},e.deactivate=function(){}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(31),r=i(61),o=i(62),s=i(65);e.default={createField:n.default,configureDefaultFieldsProfiles:r.default,configureProfilesApexClasses:o.default,configureProfilesApexPages:s.default}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(1),o=i(3),s=i(32),a=i(33),u=i(45),c=i(4),l=i(21),h=i(27),p=i(28);function f(t,e){return n(this,void 0,void 0,function*(){let i=t.map(t=>t.fullName);return new Promise((t,o)=>n(this,void 0,void 0,function*(){try{const u=yield function(){return n(this,void 0,void 0,function*(){return new Promise((t,e)=>n(this,void 0,void 0,function*(){const i=yield r.window.showQuickPick(Object.keys(s.default).map(t=>({label:t,value:t})),{ignoreFocusOut:!0,placeHolder:"Select a Field Type"});void 0!==i?t(i.value):e("Field Creation Aborted")}))})}();let c=yield a.default[u](i,e);t(c)}catch(t){o(t)}}))})}e.default=function(){return n(this,void 0,void 0,function*(){const t=yield u.default.getObjectsFromMetaData(),e=yield function(t){return n(this,void 0,void 0,function*(){return yield r.window.showQuickPick(t,{ignoreFocusOut:!0,placeHolder:"Select an SObject Type"})})}(t);if(e)try{const i=yield u.default.readSObjectDefinitionFile(e),n=yield f(i.CustomObject.fields,t.map(t=>t.label));i.CustomObject.fields.push(n),i.CustomObject.fields.sort((t,e)=>p.default.sortFieldsByField(t,e,"fullName")),u.default.writeSObjectDefinitionFile(o.join(e.folder.toString(),e.fileName),i),c.default.updateProfilesVisibilityForField(l.default.getInstance().getConfig().defaultProfiles||[],[{sObject:e,fields:[n]}],h.default.edit),r.window.showInformationMessage(`Field '${n.fullName}' was created on SObject ${e.label} and enabled as editable for profiles: ${(l.default.getInstance().getConfig().defaultProfiles||[]).map(t=>t.label)}`)}catch(t){r.window.showErrorMessage(t),console.log(t)}})}},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Checkbox="Checkbox",t.Number="Number",t.Email="Email",t.Text="Text",t.Lookup="Lookup",t.LongTextArea="LongTextArea",t.Date="Date",t.DateTime="DateTime",t.TextArea="TextArea",t.Phone="Phone"}(n||(n={})),e.default=n},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(34),o=i(43);e.default={Checkbox:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.isRequired(),u=yield o.default.fields.defaultValue([{label:"False",value:!1},{label:"True",value:!0}]);e(new r.Checkbox(s,n,a,u))}catch(t){i("Field Creation Aborted")}}))})},Text:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.stringLength(1,255,255),u=yield o.default.fields.isRequired(),c=yield o.default.fields.isExternalId(),l=yield o.default.fields.isUnique();e(new r.Text(s,n,c,u,a,l))}catch(t){i("Field Creation Aborted")}}))})},Email:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.isRequired(),u=yield o.default.fields.isExternalId(),c=yield o.default.fields.isUnique();e(new r.Email(s,n,u,a,c))}catch(t){i("Field Creation Aborted")}}))})},Date:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.isRequired(),u=yield o.default.fields.isExternalId();e(new r.Date(s,n,u,a))}catch(t){i("Field Creation Aborted")}}))})},DateTime:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.isRequired(),u=yield o.default.fields.isExternalId();e(new r.DateTime(s,n,u,a))}catch(t){i("Field Creation Aborted")}}))})},Phone:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.isRequired(),u=yield o.default.fields.isExternalId();e(new r.Phone(s,n,u,a))}catch(t){i("Field Creation Aborted")}}))})},TextArea:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.isRequired(),u=!1;e(new r.TextArea(s,n,u,a))}catch(t){i("Field Creation Aborted")}}))})},LongTextArea:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),a=yield o.default.fields.stringLength(256,131072,32768),u=yield o.default.fields.isRequired(),c=!1;e(new r.LongTextArea(s,n,c,u,a))}catch(t){i("Field Creation Aborted")}}))})},Number:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),s=yield o.default.fields.apiName(n,t),[a,u]=yield o.default.fields.precisionAndScale(),c=yield o.default.fields.isRequired(),l=yield o.default.fields.isExternalId(),h=yield o.default.fields.isUnique();e(new r.Number(s,n,l,c,h,a,u))}catch(t){i("Field Creation Aborted")}}))})},Lookup:function(t,e){return n(this,void 0,void 0,function*(){return new Promise((i,s)=>n(this,void 0,void 0,function*(){try{let n=yield o.default.fields.label(),a=yield o.default.fields.apiName(n,t),u=yield o.default.fields.isRequired(),c=yield o.default.fields.lookupTarget(e),l=yield o.default.fields.relationshipLabel(),h=yield o.default.fields.relationshipApiName(l);i(new r.Lookup(a,n,u,c,l,h))}catch(t){s("Field Creation Aborted")}}))})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(35);e.Text=n.default;const r=i(36);e.Checkbox=r.default;const o=i(37);e.Email=o.default;const s=i(22);e.Date=s.default;const a=i(22);e.DateTime=a.default;const u=i(38);e.Phone=u.default;const c=i(39);e.TextArea=c.default;const l=i(40);e.LongTextArea=l.default;const h=i(41);e.Number=h.default;const p=i(42);e.Lookup=p.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n,r,o){this.fullName=t,this.externalId=i,this.externalId&&(this.caseSensitive=!0),this.label=e,this.type="Text",this.required=n,this.length=r,this.unique=o}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n){this.fullName=t,this.externalId=!1,this.label=e,this.type="Checkbox",this.required=i,this.defaultValue=n}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n,r){this.fullName=t,this.externalId=i,this.externalId&&(this.caseSensitive=!1),this.label=e,this.type="Email",this.required=n,this.unique=r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n){this.fullName=t,this.externalId=i,this.externalId&&(this.caseSensitive=!0),this.label=e,this.type="Phone",this.required=n}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n){this.fullName=t,this.externalId=i,this.label=e,this.type="TextArea",this.required=n}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n,r){this.fullName=t,this.externalId=i,this.label=e,this.type="LongTextArea",this.required=n,this.length=r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n,r,o,s){this.fullName=t,this.externalId=i,this.label=e,this.type="Number",this.required=n,this.unique=r,this.precision=o,this.scale=s}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,n,r,o){this.fullName=t,this.externalId=!1,this.label=e,this.type="Lookup",this.required=i,this.deleteConstraint="setNull",this.referenceTo=n,this.relationshipLabel=r,this.relationshipName=o}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(44);e.default={fields:n.default}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(1);e.default={defaultValue:function(t){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=yield r.window.showQuickPick(t,{ignoreFocusOut:!0,placeHolder:"Whats the default value of the field?"});n?e(n.value):i("Field Creation Aborted")}))})},isUnique:function(){return n(this,void 0,void 0,function*(){return new Promise((t,e)=>n(this,void 0,void 0,function*(){const i=yield r.window.showQuickPick([{label:"False",value:!1},{label:"True",value:!0}],{ignoreFocusOut:!0,placeHolder:"Is the field Unique?"});i?t(i.value):e("Field Creation Aborted")}))})},isExternalId:function(){return n(this,void 0,void 0,function*(){return new Promise((t,e)=>n(this,void 0,void 0,function*(){const i=yield r.window.showQuickPick([{label:"False",value:!1},{label:"True",value:!0}],{ignoreFocusOut:!0,placeHolder:"Is the field an External ID?"});i?t(i.value):e("Field Creation Aborted")}))})},stringLength:function(t,e,i){return n(this,void 0,void 0,function*(){return new Promise((o,s)=>n(this,void 0,void 0,function*(){const n=new RegExp(`^[0-9]{${t.toString().length},${e.toString().length}}$`),a=yield r.window.showInputBox({ignoreFocusOut:!0,placeHolder:"Insert Field Maximum Length",value:i.toString(),valueSelection:[0,i.toString().length],prompt:`Insert a number between ${t} and ${e}`,validateInput:i=>{if(!n.test(i)||Number(i)>e||Number(i)<t)return`Only a number between ${t} and ${e} is allowed.`}});a?o(a):s("Field Creation Aborted")}))})},apiName:function(t,e){return n(this,void 0,void 0,function*(){const i=t.normalize("NFD").replace(/[\u0300-\u036f]|\s*/g,"")+"__c";return new Promise((t,o)=>n(this,void 0,void 0,function*(){const n=yield r.window.showInputBox({ignoreFocusOut:!0,placeHolder:"Insert Field ApiName",value:i,valueSelection:[0,i.length-3],prompt:"Only normal letters and underscores are allowed. Must end with '__c'",validateInput:t=>/^[[a-zA-Z0-9_]{3,40}(?<!_)__c$/.test(t)?-1!==e.indexOf(t)?"Another Field with the same Api Name already exists on the object.":void 0:"Invalid Api Name. Must only use Uppercase or Lowercase Letters, numbers, underscores ('_') and terminate with '__c'."});n?t(n):o("Field Creation Aborted")}))})},isRequired:function(){return n(this,void 0,void 0,function*(){return new Promise((t,e)=>n(this,void 0,void 0,function*(){const i=yield r.window.showQuickPick([{label:"False",value:!1},{label:"True",value:!0}],{ignoreFocusOut:!0,placeHolder:"Is the field Required?"});i?t(i.value):e("Field Creation Aborted")}))})},label:function(){return n(this,void 0,void 0,function*(){return new Promise((t,e)=>n(this,void 0,void 0,function*(){const i=yield r.window.showInputBox({ignoreFocusOut:!0,placeHolder:"Insert Field Label",validateInput:t=>t.length>40||t.length<1?"Field Labels cannot exceed 40 characters":void 0});i?t(i):e("Field Creation Aborted")}))})},precisionAndScale:function(){return n(this,void 0,void 0,function*(){return new Promise((t,e)=>n(this,void 0,void 0,function*(){const i=new RegExp("^[0-9]{1,2},[0-9]{1,2}$"),n=yield r.window.showInputBox({ignoreFocusOut:!0,placeHolder:"Insert Field Precision and Scale, separated by comma",value:"18,0",valueSelection:[0,2],prompt:"Format is: [Number of digits to the left of the decimal point],[Number of digits to the right of the decimal point]",validateInput:t=>{let[e,n]=t.split(",");if(!i.test(t)||Number(e)+Number(n)>18)return"Up to 18 digits are allowed, divided amongst digits to the left of the decimal point and digits to its right, in the format [digits to the left],[digits to the right]. i.e: 16,2"}});if(n){let[e,i]=n.split(",");t([Number(e),Number(i)])}else e("Field Creation Aborted")}))})},lookupTarget:function(t){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=yield r.window.showQuickPick(t.map(t=>({label:t,value:t})),{ignoreFocusOut:!0,placeHolder:"Relationship target SObject?"});n?e(n.value):i("Field Creation Aborted")}))})},relationshipLabel:function(){return n(this,void 0,void 0,function*(){return new Promise((t,e)=>n(this,void 0,void 0,function*(){const i=yield r.window.showInputBox({ignoreFocusOut:!0,placeHolder:"Insert Child Relationship Label",validateInput:t=>t.length>40||t.length<1?"Child Relationship Label cannot exceed 40 characters":void 0});i?t(i):e("Field Creation Aborted")}))})},relationshipApiName:function(t){return n(this,void 0,void 0,function*(){const e=t.normalize("NFD").replace(/[\u0300-\u036f]|\s*/g,"");return new Promise((t,i)=>n(this,void 0,void 0,function*(){const n=yield r.window.showInputBox({ignoreFocusOut:!0,placeHolder:"Insert Child Relationship Api Name",value:e,valueSelection:[0,e.length-1],prompt:"Only normal letters and underscores are allowed.",validateInput:t=>{if(!/^[[a-zA-Z0-9_]{3,40}(?<!_)$/.test(t))return"Invalid Api Name. Must only use Uppercase or Lowercase Letters, numbers, underscores ('_') and cannot exceed 40 characters"}});n?t(n):i("Field Creation Aborted")}))})}}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(46),o=i(3),s=i(1),a=i(5),u=i(23),c=i(18);e.default={getObjectsFromMetaData:function(){const t=o.join(s.workspace.rootPath,"src","objects"),e=a.readdirSync(t);if(0===e.length)throw Error("No SObject definition file was found in folder "+t);return this.generateSObjectDefinitions(e,t)},generateSObjectDefinitions:function(t,e){return t.map(t=>new r.default(t,e))},readSObjectDefinitionFile:function(t){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=o.join(t.folder.toString(),t.fileName),r=a.readFileSync(n,{encoding:"utf-8"}),s=new u.Parser({explicitArray:!1,valueProcessors:[c.parseBooleans]});try{const t=yield new Promise((t,e)=>{s.parseString(r,(i,n)=>{i?e(i):t(n)})});e(t)}catch(t){i(t)}}))})},writeSObjectDefinitionFile:function(t,e){const i=new u.Builder({xmldec:{standalone:void 0,encoding:"UTF-8",version:"1.0"}}).buildObject(e);let n=i.substr(0,130)+i.substr(130,i.length-130).replace(/"/g,"&quot;").replace(/'/g,"&apos;");a.writeFileSync(t.toString(),n,"utf8")}}},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SObject=0]="SObject",t[t.CustomMetadata=1]="CustomMetadata"}(n||(n={}));e.default=class{constructor(t,e){this.label=t.split(".")[0],this.fileName=t,this.folder=e,this.extension=t.split(".")[1],this.sObjectType=this.label.endsWith("__mdt")?n.CustomMetadata:n.SObject}}},function(t,e,i){(function(){"use strict";var t,n,r,o,s,a={}.hasOwnProperty;t=i(48),n=i(19).defaults,o=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},s=function(t){return"<![CDATA["+r(t)+"]]>"},r=function(t){return t.replace("]]>","]]]]><![CDATA[>")},e.Builder=function(){function e(t){var e,i,r;for(e in this.options={},i=n[.2])a.call(i,e)&&(r=i[e],this.options[e]=r);for(e in t)a.call(t,e)&&(r=t[e],this.options[e]=r)}return e.prototype.buildObject=function(e){var i,r,u,c,l,h;return i=this.options.attrkey,r=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===n[.2].rootName?e=e[l=Object.keys(e)[0]]:l=this.options.rootName,h=this,u=function(t,e){var n,c,l,p,f,d;if("object"!=typeof e)h.options.cdata&&o(e)?t.raw(s(e)):t.txt(e);else if(Array.isArray(e)){for(p in e)if(a.call(e,p))for(f in c=e[p])l=c[f],t=u(t.ele(f),l).up()}else for(f in e)if(a.call(e,f))if(c=e[f],f===i){if("object"==typeof c)for(n in c)d=c[n],t=t.att(n,d)}else if(f===r)t=h.options.cdata&&o(c)?t.raw(s(c)):t.txt(c);else if(Array.isArray(c))for(p in c)a.call(c,p)&&(t="string"==typeof(l=c[p])?h.options.cdata&&o(l)?t.ele(f).raw(s(l)).up():t.ele(f,l).up():u(t.ele(f),l).up());else"object"==typeof c?t=u(t.ele(f),c).up():"string"==typeof c&&h.options.cdata&&o(c)?t=t.ele(f).raw(s(c)).up():(null==c&&(c=""),t=t.ele(f,c.toString()).up());return t},c=t.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),u(c,e).end(this.options.renderOpts)},e}()}).call(this)},function(t,e,i){(function(){var e,n,r,o,s,a,u;u=i(2),s=u.assign,a=u.isFunction,e=i(49),n=i(50),o=i(20),r=i(51),t.exports.create=function(t,i,n,r){var o,a;if(null==t)throw new Error("Root element needs a name");return r=s({},i,n,r),a=(o=new e(r)).element(t),r.headless||(o.declaration(r),null==r.pubID&&null==r.sysID||o.doctype(r)),a},t.exports.begin=function(t,i,r){var o;return a(t)&&(i=(o=[t,i])[0],r=o[1],t={}),i?new n(t,i,r):new e(t)},t.exports.stringWriter=function(t){return new o(t)},t.exports.streamWriter=function(t,e){return new r(t,e)}}).call(this)},function(t,e,i){(function(){var e,n,r,o,s={}.hasOwnProperty;o=i(2).isPlainObject,e=i(0),r=i(25),n=i(20),t.exports=function(t){function i(t){i.__super__.constructor.call(this,null),t||(t={}),t.writer||(t.writer=new n),this.options=t,this.stringify=new r(t),this.isDocument=!0}return function(t,e){for(var i in e)s.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,e),i.prototype.end=function(t){var e;return t?o(t)&&(e=t,t=this.options.writer.set(e)):t=this.options.writer,t.document(this)},i.prototype.toString=function(t){return this.options.writer.set(t).document(this)},i}()}).call(this)},function(t,e,i){(function(){var e,n,r,o,s,a,u,c,l,h,p,f,d,y,m,g,w,v,b,_={}.hasOwnProperty;b=i(2),w=b.isObject,g=b.isFunction,v=b.isPlainObject,h=i(6),n=i(7),r=i(8),f=i(15),m=i(16),p=i(17),c=i(9),l=i(10),o=i(11),a=i(12),s=i(13),u=i(14),e=i(24),y=i(25),d=i(20),t.exports=function(){function t(t,e,i){var n;t||(t={}),t.writer?v(t.writer)&&(n=t.writer,t.writer=new d(n)):t.writer=new d(t),this.options=t,this.writer=t.writer,this.stringify=new y(t),this.onDataCallback=e||function(){},this.onEndCallback=i||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.node=function(t,e,i){var n;if(null==t)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),t=t.valueOf(),null==e&&(e={}),e=e.valueOf(),w(e)||(i=(n=[e,i])[0],e=n[1]),this.currentNode=new h(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=i&&this.text(i),this},t.prototype.element=function(t,e,i){return this.currentNode&&this.currentNode instanceof l?this.dtdElement.apply(this,arguments):this.node(t,e,i)},t.prototype.attribute=function(t,i){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=t&&(t=t.valueOf()),w(t))for(n in t)_.call(t,n)&&(r=t[n],this.attribute(n,r));else g(i)&&(i=i.apply()),this.options.skipNullAttributes&&null==i||(this.currentNode.attributes[t]=new e(this,t,i));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.text(e,this.currentLevel+1)),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new n(this,t),this.onData(this.writer.cdata(e,this.currentLevel+1)),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new r(this,t),this.onData(this.writer.comment(e,this.currentLevel+1)),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new f(this,t),this.onData(this.writer.raw(e,this.currentLevel+1)),this},t.prototype.instruction=function(t,e){var i,n,r,o,s;if(this.openCurrent(),null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(i=0,o=t.length;i<o;i++)n=t[i],this.instruction(n);else if(w(t))for(n in t)_.call(t,n)&&(r=t[n],this.instruction(n,r));else g(e)&&(e=e.apply()),s=new p(this,t,e),this.onData(this.writer.processingInstruction(s,this.currentLevel+1));return this},t.prototype.declaration=function(t,e,i){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return n=new c(this,t,e,i),this.onData(this.writer.declaration(n,this.currentLevel+1)),this},t.prototype.doctype=function(t,e,i){if(this.openCurrent(),null==t)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new l(this,e,i),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var i;return this.openCurrent(),i=new s(this,t,e),this.onData(this.writer.dtdElement(i,this.currentLevel+1)),this},t.prototype.attList=function(t,e,i,n,r){var s;return this.openCurrent(),s=new o(this,t,e,i,n,r),this.onData(this.writer.dtdAttList(s,this.currentLevel+1)),this},t.prototype.entity=function(t,e){var i;return this.openCurrent(),i=new a(this,!1,t,e),this.onData(this.writer.dtdEntity(i,this.currentLevel+1)),this},t.prototype.pEntity=function(t,e){var i;return this.openCurrent(),i=new a(this,!0,t,e),this.onData(this.writer.dtdEntity(i,this.currentLevel+1)),this},t.prototype.notation=function(t,e){var i;return this.openCurrent(),i=new u(this,t,e),this.onData(this.writer.dtdNotation(i,this.currentLevel+1)),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){if(!t.isOpen)return!this.root&&0===this.currentLevel&&t instanceof h&&(this.root=t),this.onData(this.writer.openNode(t,this.currentLevel)),t.isOpen=!0},t.prototype.closeNode=function(t){if(!t.isClosed)return this.onData(this.writer.closeNode(t,this.currentLevel)),t.isClosed=!0},t.prototype.onData=function(t){return this.documentStarted=!0,this.onDataCallback(t)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,i){return this.node(t,e,i)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,i){return this.declaration(t,e,i)},t.prototype.dtd=function(t,e,i){return this.doctype(t,e,i)},t.prototype.e=function(t,e,i){return this.element(t,e,i)},t.prototype.n=function(t,e,i){return this.node(t,e,i)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},function(t,e,i){(function(){var e,n,r,o,s,a,u,c,l,h,p,f,d,y={}.hasOwnProperty;u=i(9),c=i(10),e=i(7),n=i(8),l=i(6),p=i(15),f=i(16),h=i(17),r=i(11),o=i(13),s=i(12),a=i(14),d=i(26),t.exports=function(t){function i(t,e){i.__super__.constructor.call(this,e),this.stream=t}return function(t,e){for(var i in e)y.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(i,d),i.prototype.document=function(t){var e,i,r,o,s,a,l,p;for(i=0,o=(a=t.children).length;i<o;i++)(e=a[i]).isLastRootNode=!1;for(t.children[t.children.length-1].isLastRootNode=!0,p=[],r=0,s=(l=t.children).length;r<s;r++)switch(e=l[r],!1){case!(e instanceof u):p.push(this.declaration(e));break;case!(e instanceof c):p.push(this.docType(e));break;case!(e instanceof n):p.push(this.comment(e));break;case!(e instanceof h):p.push(this.processingInstruction(e));break;default:p.push(this.element(e))}return p},i.prototype.attribute=function(t){return this.stream.write(" "+t.name+'="'+t.value+'"')},i.prototype.cdata=function(t,e){return this.stream.write(this.space(e)+"<![CDATA["+t.text+"]]>"+this.endline(t))},i.prototype.comment=function(t,e){return this.stream.write(this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.endline(t))},i.prototype.declaration=function(t,e){return this.stream.write(this.space(e)),this.stream.write('<?xml version="'+t.version+'"'),null!=t.encoding&&this.stream.write(' encoding="'+t.encoding+'"'),null!=t.standalone&&this.stream.write(' standalone="'+t.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(t))},i.prototype.docType=function(t,i){var u,c,l,p;if(i||(i=0),this.stream.write(this.space(i)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t)),c=0,l=(p=t.children).length;c<l;c++)switch(u=p[c],!1){case!(u instanceof r):this.dtdAttList(u,i+1);break;case!(u instanceof o):this.dtdElement(u,i+1);break;case!(u instanceof s):this.dtdEntity(u,i+1);break;case!(u instanceof a):this.dtdNotation(u,i+1);break;case!(u instanceof e):this.cdata(u,i+1);break;case!(u instanceof n):this.comment(u,i+1);break;case!(u instanceof h):this.processingInstruction(u,i+1);break;default:throw new Error("Unknown DTD node type: "+u.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(t))},i.prototype.element=function(t,i){var r,o,s,a,u,c,d,m;for(u in i||(i=0),m=this.space(i),this.stream.write(m+"<"+t.name),c=t.attributes)y.call(c,u)&&(r=c[u],this.attribute(r));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?this.stream.write("></"+t.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)this.stream.write(">"),this.stream.write(t.children[0].value),this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.newline),s=0,a=(d=t.children).length;s<a;s++)switch(o=d[s],!1){case!(o instanceof e):this.cdata(o,i+1);break;case!(o instanceof n):this.comment(o,i+1);break;case!(o instanceof l):this.element(o,i+1);break;case!(o instanceof p):this.raw(o,i+1);break;case!(o instanceof f):this.text(o,i+1);break;case!(o instanceof h):this.processingInstruction(o,i+1);break;default:throw new Error("Unknown XML node type: "+o.constructor.name)}this.stream.write(m+"</"+t.name+">")}return this.stream.write(this.endline(t))},i.prototype.processingInstruction=function(t,e){return this.stream.write(this.space(e)+"<?"+t.target),t.value&&this.stream.write(" "+t.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(t))},i.prototype.raw=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},i.prototype.text=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},i.prototype.dtdAttList=function(t,e){return this.stream.write(this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType),"#DEFAULT"!==t.defaultValueType&&this.stream.write(" "+t.defaultValueType),t.defaultValue&&this.stream.write(' "'+t.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},i.prototype.dtdElement=function(t,e){return this.stream.write(this.space(e)+"<!ELEMENT "+t.name+" "+t.value),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},i.prototype.dtdEntity=function(t,e){return this.stream.write(this.space(e)+"<!ENTITY"),t.pe&&this.stream.write(" %"),this.stream.write(" "+t.name),t.value?this.stream.write(' "'+t.value+'"'):(t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.nData&&this.stream.write(" NDATA "+t.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},i.prototype.dtdNotation=function(t,e){return this.stream.write(this.space(e)+"<!NOTATION "+t.name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.pubID?this.stream.write(' PUBLIC "'+t.pubID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},i.prototype.endline=function(t){return t.isLastRootNode?"":this.newline},i}()}).call(this)},function(t,e,i){(function(){"use strict";var t,n,r,o,s,a,u,c,l=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;u=i(53),r=i(56),t=i(57),a=i(18),c=i(58).setImmediate,n=i(19).defaults,o=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},s=function(t,e,i){var n,r;for(n=0,r=t.length;n<r;n++)e=(0,t[n])(e,i);return e},e.Parser=function(i){function p(t){var i,r,o;if(this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this),!(this instanceof e.Parser))return new e.Parser(t);for(i in this.options={},r=n[.2])h.call(r,i)&&(o=r[i],this.options[i]=o);for(i in t)h.call(t,i)&&(o=t[i],this.options[i]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(t,e){for(var i in e)h.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(p,r.EventEmitter),p.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),c(this.processAsync))}catch(t){if(e=t,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},p.prototype.assignOrPush=function(t,e,i){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(i)):this.options.explicitArray?t[e]=[i]:t[e]=i},p.prototype.reset=function(){var t,e,i,n,r;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(r=this,function(t){if(r.saxParser.resume(),!r.saxParser.errThrown)return r.saxParser.errThrown=!0,r.emit("error",t)}),this.saxParser.onend=function(t){return function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(i){return function(r){var o,a,u,c,l;if((u={})[e]="",!i.options.ignoreAttrs)for(o in l=r.attributes)h.call(l,o)&&(t in u||i.options.mergeAttrs||(u[t]={}),a=i.options.attrValueProcessors?s(i.options.attrValueProcessors,r.attributes[o],o):r.attributes[o],c=i.options.attrNameProcessors?s(i.options.attrNameProcessors,o):o,i.options.mergeAttrs?i.assignOrPush(u,c,a):u[t][c]=a);return u["#name"]=i.options.tagNameProcessors?s(i.options.tagNameProcessors,r.name):r.name,i.options.xmlns&&(u[i.options.xmlnskey]={uri:r.uri,local:r.local}),n.push(u)}}(this),this.saxParser.onclosetag=function(t){return function(){var i,r,a,u,c,l,p,f,d,y;if(l=n.pop(),c=l["#name"],t.options.explicitChildren&&t.options.preserveChildrenOrder||delete l["#name"],!0===l.cdata&&(i=l.cdata,delete l.cdata),d=n[n.length-1],l[e].match(/^\s*$/)&&!i?(r=l[e],delete l[e]):(t.options.trim&&(l[e]=l[e].trim()),t.options.normalize&&(l[e]=l[e].replace(/\s{2,}/g," ").trim()),l[e]=t.options.valueProcessors?s(t.options.valueProcessors,l[e],c):l[e],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])),o(l)&&(l=""!==t.options.emptyTag?t.options.emptyTag:r),null!=t.options.validator&&(y="/"+function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)u=n[t],i.push(u["#name"]);return i}().concat(c).join("/"),function(){var e;try{l=t.options.validator(y,d&&d[c],l)}catch(i){return e=i,t.emit("error",e)}}()),t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof l)if(t.options.preserveChildrenOrder){if(d){for(a in d[t.options.childkey]=d[t.options.childkey]||[],p={},l)h.call(l,a)&&(p[a]=l[a]);d[t.options.childkey].push(p),delete l["#name"],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])}}else u={},t.options.attrkey in l&&(u[t.options.attrkey]=l[t.options.attrkey],delete l[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in l&&(u[t.options.charkey]=l[t.options.charkey],delete l[t.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(u[t.options.childkey]=l),l=u;return n.length>0?t.assignOrPush(d,c,l):(t.options.explicitRoot&&(f=l,(l={})[c]=f),t.resultObject=l,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),i=function(t){return function(i){var r,o;if(o=n[n.length-1])return o[e]+=i,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&(t.options.includeWhiteChars||""!==i.replace(/\\n/g,"").trim())&&(o[t.options.childkey]=o[t.options.childkey]||[],(r={"#name":"__text__"})[e]=i,t.options.normalize&&(r[e]=r[e].replace(/\s{2,}/g," ").trim()),o[t.options.childkey].push(r)),o}}(this),this.saxParser.ontext=i,this.saxParser.oncdata=function(t){var e;if(e=i(t))return e.cdata=!0}},p.prototype.parseString=function(e,i){var n;null!=i&&"function"==typeof i&&(this.on("end",function(t){return this.reset(),i(null,t)}),this.on("error",function(t){return this.reset(),i(t)}));try{return""===(e=e.toString()).trim()?(this.emit("end",null),!0):(e=t.stripBOM(e),this.options.async?(this.remaining=e,c(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(t){if(n=t,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},p}(),e.parseString=function(t,i,n){var r,o;return null!=n?("function"==typeof n&&(r=n),"object"==typeof i&&(o=i)):("function"==typeof i&&(r=i),o={}),new e.Parser(o).parseString(t,r)}}).call(this)},function(t,e,i){!function(t){t.parser=function(t,e){return new r(t,e)},t.SAXParser=r,t.SAXStream=s,t.createStream=function(t,e){return new s(t,e)},t.MAX_BUFFER_LENGTH=65536;var e,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(e,i){if(!(this instanceof r))return new r(e,i);!function(t){for(var e=0,i=n.length;e<i;e++)t[n[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=i||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=P.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(h)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),x(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),r.prototype={end:function(){C(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return O(this,"Cannot write after close. Assign an onready handler.");if(null===e)return C(this);"object"==typeof e&&(e=e.toString());var i=0,r="";for(;r=U(e,i++),this.c=r,r;)switch(this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++),this.state){case P.BEGIN:if(this.state=P.BEGIN_WHITESPACE,"\ufeff"===r)continue;B(this,r);continue;case P.BEGIN_WHITESPACE:B(this,r);continue;case P.TEXT:if(this.sawRoot&&!this.closedRoot){for(var o=i-1;r&&"<"!==r&&"&"!==r;)(r=U(e,i++))&&this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(o,i-1)}"<"!==r||this.sawRoot&&this.closedRoot&&!this.strict?(m(r)||this.sawRoot&&!this.closedRoot||F(this,"Text data outside of root node."),"&"===r?this.state=P.TEXT_ENTITY:this.textNode+=r):(this.state=P.OPEN_WAKA,this.startTagPosition=this.position);continue;case P.SCRIPT:"<"===r?this.state=P.SCRIPT_ENDING:this.script+=r;continue;case P.SCRIPT_ENDING:"/"===r?this.state=P.CLOSE_TAG:(this.script+="<"+r,this.state=P.SCRIPT);continue;case P.OPEN_WAKA:if("!"===r)this.state=P.SGML_DECL,this.sgmlDecl="";else if(m(r));else if(v(p,r))this.state=P.OPEN_TAG,this.tagName=r;else if("/"===r)this.state=P.CLOSE_TAG,this.tagName="";else if("?"===r)this.state=P.PROC_INST,this.procInstName=this.procInstBody="";else{if(F(this,"Unencoded <"),this.startTagPosition+1<this.position){var s=this.position-this.startTagPosition;r=new Array(s).join(" ")+r}this.textNode+="<"+r,this.state=P.TEXT}continue;case P.SGML_DECL:(this.sgmlDecl+r).toUpperCase()===a?(A(this,"onopencdata"),this.state=P.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+r==="--"?(this.state=P.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+r).toUpperCase()===u?(this.state=P.DOCTYPE,(this.doctype||this.sawRoot)&&F(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===r?(A(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=P.TEXT):g(r)?(this.state=P.SGML_DECL_QUOTED,this.sgmlDecl+=r):this.sgmlDecl+=r;continue;case P.SGML_DECL_QUOTED:r===this.q&&(this.state=P.SGML_DECL,this.q=""),this.sgmlDecl+=r;continue;case P.DOCTYPE:">"===r?(this.state=P.TEXT,A(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=r,"["===r?this.state=P.DOCTYPE_DTD:g(r)&&(this.state=P.DOCTYPE_QUOTED,this.q=r));continue;case P.DOCTYPE_QUOTED:this.doctype+=r,r===this.q&&(this.q="",this.state=P.DOCTYPE);continue;case P.DOCTYPE_DTD:this.doctype+=r,"]"===r?this.state=P.DOCTYPE:g(r)&&(this.state=P.DOCTYPE_DTD_QUOTED,this.q=r);continue;case P.DOCTYPE_DTD_QUOTED:this.doctype+=r,r===this.q&&(this.state=P.DOCTYPE_DTD,this.q="");continue;case P.COMMENT:"-"===r?this.state=P.COMMENT_ENDING:this.comment+=r;continue;case P.COMMENT_ENDING:"-"===r?(this.state=P.COMMENT_ENDED,this.comment=I(this.opt,this.comment),this.comment&&A(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+r,this.state=P.COMMENT);continue;case P.COMMENT_ENDED:">"!==r?(F(this,"Malformed comment"),this.comment+="--"+r,this.state=P.COMMENT):this.state=P.TEXT;continue;case P.CDATA:"]"===r?this.state=P.CDATA_ENDING:this.cdata+=r;continue;case P.CDATA_ENDING:"]"===r?this.state=P.CDATA_ENDING_2:(this.cdata+="]"+r,this.state=P.CDATA);continue;case P.CDATA_ENDING_2:">"===r?(this.cdata&&A(this,"oncdata",this.cdata),A(this,"onclosecdata"),this.cdata="",this.state=P.TEXT):"]"===r?this.cdata+="]":(this.cdata+="]]"+r,this.state=P.CDATA);continue;case P.PROC_INST:"?"===r?this.state=P.PROC_INST_ENDING:m(r)?this.state=P.PROC_INST_BODY:this.procInstName+=r;continue;case P.PROC_INST_BODY:if(!this.procInstBody&&m(r))continue;"?"===r?this.state=P.PROC_INST_ENDING:this.procInstBody+=r;continue;case P.PROC_INST_ENDING:">"===r?(A(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=P.TEXT):(this.procInstBody+="?"+r,this.state=P.PROC_INST_BODY);continue;case P.OPEN_TAG:v(f,r)?this.tagName+=r:(S(this),">"===r?M(this):"/"===r?this.state=P.OPEN_TAG_SLASH:(m(r)||F(this,"Invalid character in tag name"),this.state=P.ATTRIB));continue;case P.OPEN_TAG_SLASH:">"===r?(M(this,!0),k(this)):(F(this,"Forward-slash in opening tag not followed by >"),this.state=P.ATTRIB);continue;case P.ATTRIB:if(m(r))continue;">"===r?M(this):"/"===r?this.state=P.OPEN_TAG_SLASH:v(p,r)?(this.attribName=r,this.attribValue="",this.state=P.ATTRIB_NAME):F(this,"Invalid attribute name");continue;case P.ATTRIB_NAME:"="===r?this.state=P.ATTRIB_VALUE:">"===r?(F(this,"Attribute without value"),this.attribValue=this.attribName,j(this),M(this)):m(r)?this.state=P.ATTRIB_NAME_SAW_WHITE:v(f,r)?this.attribName+=r:F(this,"Invalid attribute name");continue;case P.ATTRIB_NAME_SAW_WHITE:if("="===r)this.state=P.ATTRIB_VALUE;else{if(m(r))continue;F(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",A(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===r?M(this):v(p,r)?(this.attribName=r,this.state=P.ATTRIB_NAME):(F(this,"Invalid attribute name"),this.state=P.ATTRIB)}continue;case P.ATTRIB_VALUE:if(m(r))continue;g(r)?(this.q=r,this.state=P.ATTRIB_VALUE_QUOTED):(F(this,"Unquoted attribute value"),this.state=P.ATTRIB_VALUE_UNQUOTED,this.attribValue=r);continue;case P.ATTRIB_VALUE_QUOTED:if(r!==this.q){"&"===r?this.state=P.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=r;continue}j(this),this.q="",this.state=P.ATTRIB_VALUE_CLOSED;continue;case P.ATTRIB_VALUE_CLOSED:m(r)?this.state=P.ATTRIB:">"===r?M(this):"/"===r?this.state=P.OPEN_TAG_SLASH:v(p,r)?(F(this,"No whitespace between attributes"),this.attribName=r,this.attribValue="",this.state=P.ATTRIB_NAME):F(this,"Invalid attribute name");continue;case P.ATTRIB_VALUE_UNQUOTED:if(!w(r)){"&"===r?this.state=P.ATTRIB_VALUE_ENTITY_U:this.attribValue+=r;continue}j(this),">"===r?M(this):this.state=P.ATTRIB;continue;case P.CLOSE_TAG:if(this.tagName)">"===r?k(this):v(f,r)?this.tagName+=r:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=P.SCRIPT):(m(r)||F(this,"Invalid tagname in closing tag"),this.state=P.CLOSE_TAG_SAW_WHITE);else{if(m(r))continue;b(p,r)?this.script?(this.script+="</"+r,this.state=P.SCRIPT):F(this,"Invalid tagname in closing tag."):this.tagName=r}continue;case P.CLOSE_TAG_SAW_WHITE:if(m(r))continue;">"===r?k(this):F(this,"Invalid characters in closing tag");continue;case P.TEXT_ENTITY:case P.ATTRIB_VALUE_ENTITY_Q:case P.ATTRIB_VALUE_ENTITY_U:var c,l;switch(this.state){case P.TEXT_ENTITY:c=P.TEXT,l="textNode";break;case P.ATTRIB_VALUE_ENTITY_Q:c=P.ATTRIB_VALUE_QUOTED,l="attribValue";break;case P.ATTRIB_VALUE_ENTITY_U:c=P.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===r?(this[l]+=R(this),this.entity="",this.state=c):v(this.entity.length?y:d,r)?this.entity+=r:(F(this,"Invalid character in entity name"),this[l]+="&"+this.entity+r,this.entity="",this.state=c);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(e){for(var i=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,o=0,s=n.length;o<s;o++){var a=e[n[o]].length;if(a>i)switch(n[o]){case"textNode":N(e);break;case"cdata":A(e,"oncdata",e.cdata),e.cdata="";break;case"script":A(e,"onscript",e.script),e.script="";break;default:O(e,"Max buffer length exceeded: "+n[o])}r=Math.max(r,a)}var u=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;N(t=this),""!==t.cdata&&(A(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(A(t,"onscript",t.script),t.script="")}};try{e=i(54).Stream}catch(t){e=function(){}}var o=t.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function s(t,i){if(!(this instanceof s))return new s(t,i);e.apply(this),this._parser=new r(t,i),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,o.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e,e;n.on(t,e)},enumerable:!0,configurable:!1})})}s.prototype=Object.create(e.prototype,{constructor:{value:s}}),s.prototype.write=function(t){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)){if(!this._decoder){var e=i(55).StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},s.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},s.prototype.on=function(t,i){var n=this;return n._parser["on"+t]||-1===o.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),e.prototype.on.call(n,t,i)};var a="[CDATA[",u="DOCTYPE",c="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",h={xml:c,xmlns:l},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function g(t){return'"'===t||"'"===t}function w(t){return">"===t||m(t)}function v(t,e){return t.test(e)}function b(t,e){return!v(t,e)}var _,T,E,P=0;for(var D in t.STATE={BEGIN:P++,BEGIN_WHITESPACE:P++,TEXT:P++,TEXT_ENTITY:P++,OPEN_WAKA:P++,SGML_DECL:P++,SGML_DECL_QUOTED:P++,DOCTYPE:P++,DOCTYPE_QUOTED:P++,DOCTYPE_DTD:P++,DOCTYPE_DTD_QUOTED:P++,COMMENT_STARTING:P++,COMMENT:P++,COMMENT_ENDING:P++,COMMENT_ENDED:P++,CDATA:P++,CDATA_ENDING:P++,CDATA_ENDING_2:P++,PROC_INST:P++,PROC_INST_BODY:P++,PROC_INST_ENDING:P++,OPEN_TAG:P++,OPEN_TAG_SLASH:P++,ATTRIB:P++,ATTRIB_NAME:P++,ATTRIB_NAME_SAW_WHITE:P++,ATTRIB_VALUE:P++,ATTRIB_VALUE_QUOTED:P++,ATTRIB_VALUE_CLOSED:P++,ATTRIB_VALUE_UNQUOTED:P++,ATTRIB_VALUE_ENTITY_Q:P++,ATTRIB_VALUE_ENTITY_U:P++,CLOSE_TAG:P++,CLOSE_TAG_SAW_WHITE:P++,SCRIPT:P++,SCRIPT_ENDING:P++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var i=t.ENTITIES[e],n="number"==typeof i?String.fromCharCode(i):i;t.ENTITIES[e]=n}),t.STATE)t.STATE[t.STATE[D]]=D;function x(t,e,i){t[e]&&t[e](i)}function A(t,e,i){t.textNode&&N(t),x(t,e,i)}function N(t){t.textNode=I(t.opt,t.textNode),t.textNode&&x(t,"ontext",t.textNode),t.textNode=""}function I(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function O(t,e){return N(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,x(t,"onerror",e),t}function C(t){return t.sawRoot&&!t.closedRoot&&F(t,"Unclosed root tag"),t.state!==P.BEGIN&&t.state!==P.BEGIN_WHITESPACE&&t.state!==P.TEXT&&O(t,"Unexpected end"),N(t),t.c="",t.closed=!0,x(t,"onend"),r.call(t,t.strict,t.opt),t}function F(t,e){if("object"!=typeof t||!(t instanceof r))throw new Error("bad call to strictFail");t.strict&&O(t,e)}function S(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0,A(t,"onopentagstart",i)}function L(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),n=i[0],r=i[1];return e&&"xmlns"===t&&(n="xmlns",r=""),{prefix:n,local:r}}function j(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=L(t.attribName,!0),i=e.prefix,n=e.local;if("xmlns"===i)if("xml"===n&&t.attribValue!==c)F(t,"xml: prefix must be bound to "+c+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==l)F(t,"xmlns: prefix must be bound to "+l+"\nActual: "+t.attribValue);else{var r=t.tag,o=t.tags[t.tags.length-1]||t;r.ns===o.ns&&(r.ns=Object.create(o.ns)),r.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,A(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function M(t,e){if(t.opt.xmlns){var i=t.tag,n=L(t.tagName);i.prefix=n.prefix,i.local=n.local,i.uri=i.ns[n.prefix]||"",i.prefix&&!i.uri&&(F(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=n.prefix);var r=t.tags[t.tags.length-1]||t;i.ns&&r.ns!==i.ns&&Object.keys(i.ns).forEach(function(e){A(t,"onopennamespace",{prefix:e,uri:i.ns[e]})});for(var o=0,s=t.attribList.length;o<s;o++){var a=t.attribList[o],u=a[0],c=a[1],l=L(u,!0),h=l.prefix,p=l.local,f=""===h?"":i.ns[h]||"",d={name:u,value:c,prefix:h,local:p,uri:f};h&&"xmlns"!==h&&!f&&(F(t,"Unbound namespace prefix: "+JSON.stringify(h)),d.uri=h),t.tag.attributes[u]=d,A(t,"onattribute",d)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),A(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=P.TEXT:t.state=P.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function k(t){if(!t.tagName)return F(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=P.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=P.SCRIPT);A(t,"onscript",t.script),t.script=""}var e=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var n=i;e--;){if(t.tags[e].name===n)break;F(t,"Unexpected close tag")}if(e<0)return F(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=P.TEXT);t.tagName=i;for(var r=t.tags.length;r-- >e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,A(t,"onclosetag",t.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var u=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach(function(e){var i=o.ns[e];A(t,"onclosenamespace",{prefix:e,uri:i})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=P.TEXT}function R(t){var e,i=t.entity,n=i.toLowerCase(),r="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[n]?t.ENTITIES[n]:("#"===(i=n).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),r=(e=parseInt(i,16)).toString(16)):(i=i.slice(1),r=(e=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),isNaN(e)||r.toLowerCase()!==i?(F(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function B(t,e){"<"===e?(t.state=P.OPEN_WAKA,t.startTagPosition=t.position):m(e)||(F(t,"Non-whitespace before first tag."),t.textNode=e,t.state=P.TEXT)}function U(t,e){var i="";return e<t.length&&(i=t.charAt(e)),i}P=t.STATE,String.fromCodePoint||(_=String.fromCharCode,T=Math.floor,E=function(){var t,e,i=16384,n=[],r=-1,o=arguments.length;if(!o)return"";for(var s="";++r<o;){var a=Number(arguments[r]);if(!isFinite(a)||a<0||a>1114111||T(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(t=55296+((a-=65536)>>10),e=a%1024+56320,n.push(t,e)),(r+1===o||n.length>i)&&(s+=_.apply(null,n),n.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:E,configurable:!0,writable:!0}):String.fromCodePoint=E)}(e)},function(t,e){t.exports=require("stream")},function(t,e){t.exports=require("string_decoder")},function(t,e){t.exports=require("events")},function(t,e){(function(){"use strict";e.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},function(t,e){t.exports=require("timers")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.label=t.split(".")[0],this.fileName=t,this.folder=e,this.extension=t.split(".")[1]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.defaultProfiles=void 0}}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(21),o=i(1),s=i(4);e.default=function(){return n(this,void 0,void 0,function*(){try{const t=s.default.getObjectsFromMetaData(),e=yield function(t){return n(this,void 0,void 0,function*(){let e=[];if(void 0!==r.default.getInstance().getConfig().defaultProfiles){let t=r.default.getInstance().getConfig().defaultProfiles||[];e=t.map(t=>t.label)}const i=t.map(t=>Object.assign({},t,{picked:e.includes(t.label)}));return new Promise((t,e)=>n(this,void 0,void 0,function*(){const n=yield o.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:"Select all Profiles you want to add fields visibility after creation by default.",canPickMany:!0});void 0!==n?(n.forEach(t=>{delete t.picked}),t(n)):e("Profiles Configuration Aborted")}))})}(t);r.default.getInstance().getConfig().defaultProfiles=e}catch(t){o.window.showErrorMessage(t),console.log(t)}})}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(1),o=i(4),s=i(63),a=i(4);e.default=function(){return n(this,void 0,void 0,function*(){try{const t=o.default.getObjectsFromMetaData(),e=yield function(t){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=yield r.window.showQuickPick(t,{ignoreFocusOut:!0,placeHolder:"Select the Profile you want to define Apex Class Access"});void 0!==n?e(n):i("Profiles Configuration Aborted")}))})}(t),i=yield o.default.readProfileDefinitionFile(e),u=yield s.default.getObjectsFromMetaData(),c=(yield function(t,e,i){return n(this,void 0,void 0,function*(){const o=e.map(t=>Object.assign({},t,{picked:i.includes(t.label)}));return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=yield r.window.showQuickPick(o,{ignoreFocusOut:!0,placeHolder:`Select all Apex Classes you want to add access to profile ${t}.`,canPickMany:!0});void 0!==n?e(n):i("Profiles Configuration Aborted")}))})}(e.label,u,i.Profile.classAccesses.filter(t=>t.enabled).map(t=>t.apexClass))).map(t=>t.label);a.default.updateProfilesApexClassesAccess(e,c),r.window.showInformationMessage(`Updated classes access on profile ${e.label}`)}catch(t){r.window.showErrorMessage(t),console.log(t)}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(64),r=i(3),o=i(1),s=i(5);e.default={getObjectsFromMetaData:function(){const t=r.join(o.workspace.rootPath,"src","classes"),e=s.readdirSync(t);if(0===e.length)throw Error("No Apex Class definition file was found in folder "+t);return this.generateSObjectDefinitions(e,t)},generateSObjectDefinitions:function(t,e){return t.filter(t=>t.endsWith(".cls")).map(t=>new n.default(t,e))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.label=t.split(".")[0],this.fileName=t,this.folder=e,this.extension=t.split(".")[1]}}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(1),o=i(4),s=i(66),a=i(4);e.default=function(){return n(this,void 0,void 0,function*(){try{const t=o.default.getObjectsFromMetaData(),e=yield function(t){return n(this,void 0,void 0,function*(){return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=yield r.window.showQuickPick(t,{ignoreFocusOut:!0,placeHolder:"Select the Profile you want to define Apex Class Access"});void 0!==n?e(n):i("Profiles Configuration Aborted")}))})}(t),i=yield o.default.readProfileDefinitionFile(e),u=yield s.default.getObjectsFromMetaData(),c=(yield function(t,e,i){return n(this,void 0,void 0,function*(){const o=e.map(t=>Object.assign({},t,{picked:i.includes(t.label)}));return new Promise((e,i)=>n(this,void 0,void 0,function*(){const n=yield r.window.showQuickPick(o,{ignoreFocusOut:!0,placeHolder:`Select all Apex Classes you want to add access to profile ${t}.`,canPickMany:!0});void 0!==n?e(n):i("Profiles Configuration Aborted")}))})}(e.label,u,i.Profile.pageAccesses.filter(t=>t.enabled).map(t=>t.apexPage))).map(t=>t.label);a.default.updateProfilesApexPagesAccess(e,c),r.window.showInformationMessage(`Updated Visualforce pages access on profile ${e.label}`)}catch(t){r.window.showErrorMessage(t),console.log(t)}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(67),r=i(3),o=i(1),s=i(5);e.default={getObjectsFromMetaData:function(){const t=r.join(o.workspace.rootPath,"src","pages"),e=s.readdirSync(t);if(0===e.length)throw Error("No Visualforce Page definition file was found in folder "+t);return this.generateSObjectDefinitions(e,t)},generateSObjectDefinitions:function(t,e){return t.filter(t=>t.endsWith(".page")).map(t=>new n.default(t,e))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.label=t.split(".")[0],this.fileName=t,this.folder=e,this.extension=t.split(".")[1]}}}]);
//# sourceMappingURL=extension.js.map